<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Revision analysis through a battery of tests — revision_analysis • rjd3revisions</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Revision analysis through a battery of tests — revision_analysis"><meta name="description" content="The function perform parametric tests which enable the users to detect
potential bias (both mean and regression bias) and sources of inefficiency in
preliminary estimates. We would conclude to inefficiency in the preliminary
estimates when revisions are predictable in some way. In the results,
parametric tests are divided into 5 categories: relevancy (check whether
preliminary estimates are even worth it), bias, efficiency, orthogonality
(correlation at higher lags), and signalVSnoise. Descriptive statistics on
revisions are also provided. For some of the parametric tests, prior
transformation of the vintage data may be important to avoid misleading
results. By default, the decision to differentiate the vintage data is
performed automatically based on unit root and co-integration tests whose
results can be found found in the results too (section 'varbased'). Finally,
running the function render_report() on the output of revision_analysis()
would give you both a formatted summary of the results and full explanations
about each tests."><meta property="og:description" content="The function perform parametric tests which enable the users to detect
potential bias (both mean and regression bias) and sources of inefficiency in
preliminary estimates. We would conclude to inefficiency in the preliminary
estimates when revisions are predictable in some way. In the results,
parametric tests are divided into 5 categories: relevancy (check whether
preliminary estimates are even worth it), bias, efficiency, orthogonality
(correlation at higher lags), and signalVSnoise. Descriptive statistics on
revisions are also provided. For some of the parametric tests, prior
transformation of the vintage data may be important to avoid misleading
results. By default, the decision to differentiate the vintage data is
performed automatically based on unit root and co-integration tests whose
results can be found found in the results too (section 'varbased'). Finally,
running the function render_report() on the output of revision_analysis()
would give you both a formatted summary of the results and full explanations
about each tests."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rjd3revisions</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rjd3revisions.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rjdverse/rjd3revisions/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Revision analysis through a battery of tests</h1>
      <small class="dont-index">Source: <a href="https://github.com/rjdverse/rjd3revisions/blob/develop/R/revision_analysis.R" class="external-link"><code>R/revision_analysis.R</code></a></small>
      <div class="d-none name"><code>revision_analysis.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function perform parametric tests which enable the users to detect
potential bias (both mean and regression bias) and sources of inefficiency in
preliminary estimates. We would conclude to inefficiency in the preliminary
estimates when revisions are predictable in some way. In the results,
parametric tests are divided into 5 categories: relevancy (check whether
preliminary estimates are even worth it), bias, efficiency, orthogonality
(correlation at higher lags), and signalVSnoise. Descriptive statistics on
revisions are also provided. For some of the parametric tests, prior
transformation of the vintage data may be important to avoid misleading
results. By default, the decision to differentiate the vintage data is
performed automatically based on unit root and co-integration tests whose
results can be found found in the results too (section 'varbased'). Finally,
running the function <code><a href="render_report.html">render_report()</a></code> on the output of <code>revision_analysis()</code>
would give you both a formatted summary of the results and full explanations
about each tests.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">revision_analysis</span><span class="op">(</span></span>
<span>  <span class="va">vintages</span>,</span>
<span>  gap <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  view <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vertical"</span>, <span class="st">"diagonal"</span><span class="op">)</span>,</span>
<span>  n.releases <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  transf.diff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"forced"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  transf.log <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  descriptive.rounding <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  nrevs <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  ref <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  na.zero <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-vintages">vintages<a class="anchor" aria-label="anchor" href="#arg-vintages"></a></dt>
<dd><p>an object of class <code>"rjd3rev_vintages"</code> which is the output
of the function <code><a href="create_vintages.html">create_vintages()</a></code></p></dd>


<dt id="arg-gap">gap<a class="anchor" aria-label="anchor" href="#arg-gap"></a></dt>
<dd><p>Integer. Gap to consider between each vintages. Default is 1
which means that revisions are calculated and tested for each
vintages consecutively.</p></dd>


<dt id="arg-view">view<a class="anchor" aria-label="anchor" href="#arg-view"></a></dt>
<dd><p>Selected view. Can be "vertical" (the default) or "diagonal".
Vertical view shows the observed values at each time period by
the different vintages. Diagonal view shows subsequent releases
of a given time period, without regard for the date of
publication, which can be particularly informative when regular
estimation intervals exist. See <code>?create_vintages()</code> for more
information about interests and drawbacks of each view.</p></dd>


<dt id="arg-n-releases">n.releases<a class="anchor" aria-label="anchor" href="#arg-n-releases"></a></dt>
<dd><p>only used when <code>view = "diagonal"</code>. Ignored otherwise.
Allow the user to limit the number of releases under
investigation). When <code>view = "vertical"</code>, the user is
invited to limit the number of vintages upstream through
the parameter <code>vintage_selection</code> in <code><a href="create_vintages.html">create_vintages()</a></code>
whenever necessary.</p></dd>


<dt id="arg-transf-diff">transf.diff<a class="anchor" aria-label="anchor" href="#arg-transf-diff"></a></dt>
<dd><p>differentiation to apply to the data prior testing. Only
used for regressions including vintage data as regressor
and/or regressand. Regression including revision data only
are never differentiated even if <code>transf.diff = "forced"</code>.
Options are "automatic" (the default), "forced" and "none".</p></dd>


<dt id="arg-transf-log">transf.log<a class="anchor" aria-label="anchor" href="#arg-transf-log"></a></dt>
<dd><p>Boolean whether a log-transformation should first be
applied to the data. Default is FALSE.</p></dd>


<dt id="arg-descriptive-rounding">descriptive.rounding<a class="anchor" aria-label="anchor" href="#arg-descriptive-rounding"></a></dt>
<dd><p>Integer. Number of decimals to display for
descriptive statistics. Default is 3.</p></dd>


<dt id="arg-nrevs-ref">nrevs, ref<a class="anchor" aria-label="anchor" href="#arg-nrevs-ref"></a></dt>
<dd><p>Integer. Number of lags to consider for orthogonality tests
1 and 2 respectively.</p></dd>


<dt id="arg-na-zero">na.zero<a class="anchor" aria-label="anchor" href="#arg-na-zero"></a></dt>
<dd><p>Boolean whether missing values should be considered as 0 or
rather as data not yet available (the default).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an object of class 'rjd3rev_rslts'</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="create_vintages.html">create_vintages()</a></code> to create the input object,
<code><a href="render_report.html">render_report()</a></code> to get a summary and information the tests</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simulated data</span></span></span>
<span class="r-in"><span><span class="va">period_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2011-01-01'</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2020-10-01'</span><span class="op">)</span>,by<span class="op">=</span><span class="st">'quarter'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">qtr</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">period_range</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op">+</span><span class="fl">2</span><span class="op">)</span><span class="op">/</span><span class="fl">3</span></span></span>
<span class="r-in"><span><span class="va">time_period</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">period_range</span>, <span class="st">"%Y"</span><span class="op">)</span>, <span class="st">"Q"</span>, <span class="va">qtr</span><span class="op">)</span>,<span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">np</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">period_range</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rev_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"2021-06-30"</span>,<span class="va">np</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"2021-12-31"</span>,<span class="va">np</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"2022-06-30"</span>,<span class="va">np</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"2022-12-31"</span>,<span class="va">np</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"2023-06-30"</span>,<span class="va">np</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, <span class="va">np</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rev</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">np</span><span class="op">*</span><span class="fl">4</span>,<span class="fl">0</span>,<span class="fl">.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obs_values</span> <span class="op">&lt;-</span> <span class="va">xt</span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">xt</span> <span class="op">&lt;-</span> <span class="va">xt</span><span class="op">+</span><span class="va">rev</span><span class="op">[</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="op">(</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="va">np</span><span class="op">)</span><span class="op">:</span><span class="op">(</span><span class="va">i</span><span class="op">*</span><span class="va">np</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="va">obs_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">obs_values</span>,<span class="va">xt</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">rev_date</span>, <span class="va">time_period</span>, <span class="va">obs_values</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a `"rjd3rev_vintages"` object with the input</span></span></span>
<span class="r-in"><span><span class="va">vintages</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_vintages.html">create_vintages</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">df</span>, periodicity <span class="op">=</span> <span class="fl">4</span>, date_format <span class="op">=</span> <span class="st">"%Y-%m-%d"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># revisions &lt;- get_revisions(vintages, gap = 1) # just to get a first insight of the revisions</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Call using all default parameters</span></span></span>
<span class="r-in"><span><span class="va">rslt1</span> <span class="op">&lt;-</span> <span class="fu">revision_analysis</span><span class="op">(</span><span class="va">vintages</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># render_report(rslt1)</span></span></span>
<span class="r-in"><span><span class="co"># summary(rslt1) # formatted summary only</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calls using diagonal view (suited in many situations such as to evaluate GDP estimates)</span></span></span>
<span class="r-in"><span><span class="co">## Note: when input are not growth rates but the gross series, differentiation is</span></span></span>
<span class="r-in"><span><span class="co">## performed automatically (if transf.diff is let to its default option) but `transf.log`</span></span></span>
<span class="r-in"><span><span class="co">## must be set to TRUE manually whenever a log-transformation of the data is necessary</span></span></span>
<span class="r-in"><span><span class="va">rslt2</span> <span class="op">&lt;-</span> <span class="fu">revision_analysis</span><span class="op">(</span><span class="va">vintages</span>, gap <span class="op">=</span> <span class="fl">1</span>, view <span class="op">=</span> <span class="st">"diagonal"</span>, n.releases <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># render_report(rslt2)</span></span></span>
<span class="r-in"><span><span class="co"># summary(rslt2)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Call to evaluate revisions for a specific range of vintage periods</span></span></span>
<span class="r-in"><span><span class="va">vintages</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_vintages.html">create_vintages</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>    periodicity <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    vintage_selection <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>start<span class="op">=</span><span class="st">"2021-12-31"</span>, end<span class="op">=</span><span class="st">"2023-06-30"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rslt3</span> <span class="op">&lt;-</span> <span class="fu">revision_analysis</span><span class="op">(</span><span class="va">vintages</span>, gap<span class="op">=</span><span class="fl">2</span>, view <span class="op">=</span> <span class="st">"vertical"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#render_report(rslt3)</span></span></span>
<span class="r-in"><span><span class="co">#summary(rslt3)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Note that it is possible to change thresholds values for quality</span></span></span>
<span class="r-in"><span><span class="co">## assessment using options (see vignette for details)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>augmented_t_threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>severe <span class="op">=</span> <span class="fl">0.005</span>, bad <span class="op">=</span> <span class="fl">0.01</span>, uncertain <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        slope_and_drift_threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>severe <span class="op">=</span> <span class="fl">0.005</span>, bad <span class="op">=</span> <span class="fl">0.05</span>, uncertain <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        theil_u2_threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>uncertain <span class="op">=</span> <span class="fl">.5</span>, bad <span class="op">=</span> <span class="fl">.7</span>, severe <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rslt4</span> <span class="op">&lt;-</span> <span class="fu">revision_analysis</span><span class="op">(</span><span class="va">vintages</span>, gap <span class="op">=</span> <span class="fl">1</span>, view <span class="op">=</span> <span class="st">"diagonal"</span>, n.releases <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">rslt4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Corentin Lemasson, Tanguy Barthelemy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

